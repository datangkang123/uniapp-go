(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/admin/bgsxedit"],{"1dd0":function(e,t,n){"use strict";n.r(t);var u=n("4751"),o=n.n(u);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);t["default"]=o.a},"24fd":function(e,t,n){"use strict";var u=n("5e15"),o=n.n(u);o.a},4751:function(e,t,n){"use strict";(function(e){function n(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){a=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(a)throw s}}}}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,u=new Array(t);n<t;n++)u[n]=e[n];return u}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={data:function(){return{id:"",zdlx:{0:"单行文本",1:"多行文本",2:"单选框",3:"多选框",4:"单选下拉",5:"多选下拉",6:"单图上传",7:"多图上传",8:"日期",9:"时间",10:"日期时间",11:"省市县区",12:"手机号",13:"身份证号",14:"车牌号",15:"整数",16:"小数",17:"审核",18:"签名",19:"表中表",20:"网址",21:"数组"},bgsx:{},zds:[],sjgly:[],shy:[],zddata:[],fldata:[],tbtzdata:[],selectShow:!1,selectShowfl:!1,selectShowzd:!1,pickerShowkssj:!1,pickerShowjssj:!1,xzzd:"",radioCheckWrap:!1,labelPosition:"top",errorType:["message"],customStyle:{width:"600rpx",marginTop:"20px"},params2:{year:!0,month:!0,day:!0,hour:!0,minute:!0,second:!0,timestamp:!0},login:!1,userInfo:""}},onLoad:function(t){t.id?(this.id=t.id,this.syscsh(this.id)):e.showToast({title:"项目不存在",success:function(t){setTimeout((function(){e.navigateTo({url:"/pages/admin/bgsx"})}),600)}})},onPullDownRefresh:function(){this.syscsh(this.id),setTimeout((function(){e.stopPullDownRefresh()}),500)},methods:{syscsh:function(t){var u=this,o=e.getStorageSync("userInfo");if(!o)return this.login=!1,e.navigateTo({url:"/pages/user/login"}),this.$u.toast("请先登录");if("admin"!==o.Role&&"cjsjgl"!==o.Role)return this.$u.toast("无权进入");if(this.userInfo=o,this.login=!0,getApp().globalData.data.xmfl){var i,s=getApp().globalData.data.xmfl.split(","),r=n(s);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.fldata.push({value:a,label:a})}}catch(c){r.e(c)}finally{r.f()}}e.request({url:getApp().globalData.url+"/admin/system/getBgsx",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+this.userInfo.token},data:{ID:t},success:function(t){if(401==t.statusCode)e.showToast({title:"登录已过期",success:function(t){setTimeout((function(){e.removeStorageSync("userInfo"),u.login=!1,u.userInfo={},e.navigateTo({url:"/pages/user/login"})}),600)}});else{if(0!==t.data.code)return u.$u.toast("参数获取失败");u.bgsx=t.data.result;var n=u.bgsx.Zd,o=u.bgsx.Cxtj,i=u.bgsx.Sjgl,s=u.bgsx.Shy,r=u.bgsx.Tbtz;for(var a in u.bgsx.Zd)u.zds.push({value:a,name:n[a],checked:o&&o.includes(a)}),u.zddata.push({value:a,label:n[a]});var c={1:"返回首页",2:"我要修改",3:"继续填报",4:"关闭页面",5:"阻止返回"};for(var l in c)u.tbtzdata.push({value:Number(l),name:c[l],checked:r&&r.includes(Number(l))});u.getsjgly(i,s),u.bgsx.Kssj=u.$u.timeFormat(u.bgsx.Kssj,"yyyy-mm-dd hh:MM:ss"),u.bgsx.Jssj=u.$u.timeFormat(u.bgsx.Jssj,"yyyy-mm-dd hh:MM:ss")}}})},getsjgly:function(t,u){var o=this;e.request({url:getApp().globalData.url+"/admin/system/userpluck",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+this.userInfo.token},success:function(e){if(0!==e.data.code)return!1;var i,s=n(e.data.result);try{for(s.s();!(i=s.n()).done;){var r=i.value;"sjgl"==r.Role?o.sjgly.push({value:r.ID.toString(),name:r.Username,checked:t&&t.includes(r.ID.toString())}):"shy"==r.Role&&o.shy.push({value:r.ID.toString(),name:r.Username,checked:u&&u.includes(r.ID.toString())})}}catch(a){s.e(a)}finally{s.f()}}})},submit:function(){var t=this;if(!this.bgsx.Xmbs||!this.bgsx.Xmmc||!this.bgsx.Kftb||!this.bgsx.Cxfs)return this.$u.toast("项目标识、名称为空");console.log(this.bgsx),this.bgsx.Kssj=this.$u.timeFormat(this.bgsx.Kssj,"yyyy-mm-ddThh:MM:ss.959+08:00"),this.bgsx.Jssj=this.$u.timeFormat(this.bgsx.Jssj,"yyyy-mm-ddThh:MM:ss.959+08:00"),e.request({url:getApp().globalData.url+"/admin/system/updatebgsx",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+this.userInfo.token},data:{id:this.id,data:JSON.stringify(this.bgsx)},success:function(n){if(0!=n.data.code)return t.$u.toast(n.data.message);e.showToast({title:n.data.message,success:function(t){setTimeout((function(){e.navigateTo({url:"/pages/admin/bgsx"})}),600)}})}})},checkboxGroupChange:function(e,t){this.bgsx[t]=e},confirmdate:function(e,t){this.bgsx[t]=e.year+"-"+e.month+"-"+e.day+" "+e.hour+":"+e.minute+":"+e.second},xzzdsz:function(e){var t=e.shift(),n=t.value;this.xzzd=n},confirm:function(e){this.bgsx.Xmbs=e.shift().value}}};t.default=i}).call(this,n("543d")["default"])},"5e15":function(e,t,n){},"8b68":function(e,t,n){"use strict";(function(e){n("98dd");u(n("66fd"));var t=u(n("9383"));function u(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},9383:function(e,t,n){"use strict";n.r(t);var u=n("b270"),o=n("1dd0");for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("24fd");var s,r=n("f0c5"),a=Object(r["a"])(o["default"],u["b"],u["c"],!1,null,"45030eb6",null,!1,u["a"],s);t["default"]=a.exports},b270:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return u}));var u={uForm:function(){return n.e("uview-ui/components/u-form/u-form").then(n.bind(null,"d956"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"6448"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-input/u-input")]).then(n.bind(null,"37d1"))},uSelect:function(){return n.e("uview-ui/components/u-select/u-select").then(n.bind(null,"0477"))},uCheckboxGroup:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(n.bind(null,"cad5"))},uCheckbox:function(){return n.e("uview-ui/components/u-checkbox/u-checkbox").then(n.bind(null,"30fd"))},uRow:function(){return n.e("uview-ui/components/u-row/u-row").then(n.bind(null,"ba9b"))},uCol:function(){return n.e("uview-ui/components/u-col/u-col").then(n.bind(null,"0faf"))},uSwitch:function(){return n.e("uview-ui/components/u-switch/u-switch").then(n.bind(null,"6fb5"))},uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-picker/u-picker")]).then(n.bind(null,"4f8a"))},uField:function(){return n.e("uview-ui/components/u-field/u-field").then(n.bind(null,"8296"))},uRadioGroup:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-radio-group/u-radio-group")]).then(n.bind(null,"3b8c"))},uRadio:function(){return n.e("uview-ui/components/u-radio/u-radio").then(n.bind(null,"f574"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"a25e"))}},o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.xzzd?[0,1,7].includes(Number(e.bgsx.Zdsz[e.xzzd].i)):null),u=e.xzzd?[2,3,4,5].includes(Number(e.bgsx.Zdsz[e.xzzd].i)):null,o=e.xzzd?[2,4].includes(Number(e.bgsx.Zdsz[e.xzzd].i)):null;e._isMounted||(e.e0=function(t){e.selectShowfl=!0},e.e1=function(t){e.pickerShowkssj=!0},e.e2=function(t){e.pickerShowjssj=!0},e.e3=function(t){e.selectShowzd=!0}),e.$mp.data=Object.assign({},{$root:{g0:n,g1:u,g2:o}})},i=[]}},[["8b68","common/runtime","common/vendor"]]]);