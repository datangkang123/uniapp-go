(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/form/formedit"],{"05a2":function(e,t,n){"use strict";n.r(t);var r=n("468c"),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=i.a},"421b":function(e,t,n){"use strict";n.r(t);var r=n("aa83"),i=n("05a2");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("a178");var a,u=n("f0c5"),s=Object(u["a"])(i["default"],r["b"],r["c"],!1,null,"49d8c038",null,!1,r["a"],a);t["default"]=s.exports},"468c":function(e,t,n){"use strict";(function(e){function r(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){Promise.all([n.e("common/vendor"),n.e("components/htz-image-upload/htz-image-upload")]).then(function(){return resolve(n("868e"))}.bind(null,n)).catch(n.oe)},u={data:function(){return{id:"",jgid:"",loading:!1,bgsx:{},zdsz:{},model:{},rules:{},action:getApp().globalData.url+"/uploadimg",actionbd:getApp().globalData.url+"/admin/idcardocr",sizetype:["compressed"],radioCheckWrap:!1,image:{K0:[],K1:[],K2:[],K3:[],K4:[],K5:[],K6:[],K7:[],K8:[],K9:[],K10:[],K11:[],K12:[],K13:[],K14:[],K15:[],K16:[],K17:[],K18:[],K19:[],K20:[],K21:[],K22:[],K23:[],K24:[],K25:[],K26:[],K27:[],K28:[],K29:[],K30:[],K31:[],K32:[],K33:[],K34:[],K35:[],K36:[],K37:[],K38:[],K39:[],K40:[],K41:[],K42:[],K43:[],K44:[],K45:[],K46:[],K47:[],K48:[],K49:[],K50:[],K51:[],K52:[],K53:[],K54:[],K55:[],K56:[],K57:[],K58:[],K59:[],K60:[]},selectShow:{K0:!1,K1:!1,K2:!1,K3:!1,K4:!1,K5:!1,K6:!1,K7:!1,K8:!1,K9:!1,K10:!1,K11:!1,K12:!1,K13:!1,K14:!1,K15:!1,K16:!1,K17:!1,K18:!1,K19:!1,K20:!1,K21:!1,K22:!1,K23:!1,K24:!1,K25:!1,K26:!1,K27:!1,K28:!1,K29:!1,K30:!1,K31:!1,K32:!1,K33:!1,K34:!1,K35:!1,K36:!1,K37:!1,K38:!1,K39:!1,K40:!1,K41:!1,K42:!1,K43:!1,K44:!1,K45:!1,K46:!1,K47:!1,K48:!1,K49:!1,K50:!1,K51:!1,K52:!1,K53:!1,K54:!1,K55:!1,K56:!1,K57:!1,K58:!1,K59:!1,K60:!1},pickerShow:{K0:!1,K1:!1,K2:!1,K3:!1,K4:!1,K5:!1,K6:!1,K7:!1,K8:!1,K9:!1,K10:!1,K11:!1,K12:!1,K13:!1,K14:!1,K15:!1,K16:!1,K17:!1,K18:!1,K19:!1,K20:!1,K21:!1,K22:!1,K23:!1,K24:!1,K25:!1,K26:!1,K27:!1,K28:!1,K29:!1,K30:!1,K31:!1,K32:!1,K33:!1,K34:!1,K35:!1,K36:!1,K37:!1,K38:!1,K39:!1,K40:!1,K41:!1,K42:!1,K43:!1,K44:!1,K45:!1,K46:!1,K47:!1,K48:!1,K49:!1,K50:!1,K51:!1,K52:!1,K53:!1,K54:!1,K55:!1,K56:!1,K57:!1,K58:!1,K59:!1,K60:!1},labelPosition:"top",dqrShow:{K0:!1,K1:!1,K2:!1,K3:!1,K4:!1,K5:!1,K6:!1,K7:!1,K8:!1,K9:!1,K10:!1,K11:!1,K12:!1,K13:!1,K14:!1,K15:!1,K16:!1,K17:!1,K18:!1,K19:!1,K20:!1,K21:!1,K22:!1,K23:!1,K24:!1,K25:!1,K26:!1,K27:!1,K28:!1,K29:!1,K30:!1,K31:!1,K32:!1,K33:!1,K34:!1,K35:!1,K36:!1,K37:!1,K38:!1,K39:!1,K40:!1,K41:!1,K42:!1,K43:!1,K44:!1,K45:!1,K46:!1,K47:!1,K48:!1,K49:!1,K50:!1,K51:!1,K52:!1,K53:!1,K54:!1,K55:!1,K56:!1,K57:!1,K58:!1,K59:!1,K60:!1},errorType:["message"],scrollTop:0,customStyle:{marginTop:"20px"},params:{year:!1,month:!1,day:!1,hour:!0,minute:!0,second:!0,timestamp:!0},params2:{year:!0,month:!0,day:!0,hour:!0,minute:!0,second:!0,timestamp:!0}}},onLoad:function(t){t.id&&t.jgid?(this.id=t.id,this.jgid=t.jgid,this.zt=t.zt):(this.$u.toast("数据表不存在"),setTimeout((function(){e.navigateTo({url:"/pages/form/tb"})}),500))},onReady:function(){this.syscsh(this.id,this.jgid)},components:{htzImageUpload:a},onPullDownRefresh:function(){this.syscsh(this.id,this.jgid),setTimeout((function(){e.stopPullDownRefresh()}),500)},methods:{evalRpn:function(e){var t=[];while(e.length>0){var n=e.shift();if(this.isOperator(n)){if(t.length<2)throw"unvalid stack length";var r=t.pop(),i=t.pop();t.push(this.getResult(i,r,n))}else t.push(n)}if(1!=t.length)throw"unvalid expression";return t[0]},getResult:function(e,t,n){var r=0;switch(n){case"+":r=e+t;break;case"-":r=e-t;break;case"*":r=e*t;break;case"/":r=e/t;break;default:return 0}return this.formatFloat(r,2)},formatFloat:function(e,t){var n=Math.pow(10,t);return parseInt(e*n,10)/n},isOperator:function(e){var t="+-*/()";return t.indexOf(e)>-1},getPrioraty:function(e){switch(e){case"+":case"-":return 1;case"*":case"/":return 2;default:return 0}},prioraty:function(e,t){return this.getPrioraty(e)<=this.getPrioraty(t)},dal2Rpn:function(e){for(var t=[],n=[],r=[],i="",o=0,a=e.length;o<a;o++){var u=e[o];" "!=u&&(i+=u,o+1<e.length?(this.isOperator(e[o])||this.isOperator(e[o+1]))&&(t.push(i),i=""):(t.push(i),i=""))}while(t.length>0){u=t.shift();if(this.isOperator(u))if("("==u)n.push(u);else if(")"==u){var s=n.pop();while("("!=s&&n.length>0)r.push(s),s=n.pop();if("("!=s)throw"error: unmatched ()"}else{while(this.prioraty(u,n[n.length-1])&&n.length>0)r.push(n.pop());n.push(u)}else r.push(new Number(u))}if(n.length>0){if(")"==n[n.length-1]||"("==n[n.length-1])throw"error: unmatched ()";while(n.length>0)r.push(n.pop())}return r},jschange:function(e){for(var t in console.log(e,this.model[e]),this.zdsz)if(22==this.zdsz[t].i&&this.zdsz[t].hnjs){var n=this.zdsz[t].hnjs;n=n.replace(/\（/g,"("),n=n.replace(/\）/g,")"),n=n.replace(/\ /g,"");for(var r=60,i=0;i<=60;i++){var o="K"+r;n=n.replace(o,this.model[o]?this.model[o]:0),r--}this.model[t]=this.evalRpn(this.dal2Rpn(n)).toFixed(2)}this.$forceUpdate()},zidingyiSuccess:function(t){var n=this,r=JSON.parse(t.data);if(0!=r.code)return this.$u.toast("图片上传失败");var i=r.message,o=r.result;this.image[i].push(o),e.request({url:this.actionbd,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+e.getStorageSync("userInfo").token},data:{imgurl:o},success:function(t){if(401!=t.statusCode||"2"!=getApp().globalData.data.islogin){if(0!=t.data.code)return n.$u.toast(t.data.message);var r=t.data.result.words_result;if(!r)return n.$u.toast(t.data.result.error_msg);var a={};a.name=r.姓名.words,a.sex=r.性别.words,a.mz=r.民族.words;var u=r.出生.words;a.day=u.substr(0,4)+"-"+u.substr(4,2)+"-"+u.substr(6,2),a.ade=r.住址.words,a.zmtp=JSON.stringify([o]);var s=r.公民身份号码.words;n.model[i]=s;var l=n.bgsx.Zdsz[i];for(var d in l)["ade","day","sex","name","zmtp","mz"].includes(d)&&l[d]&&(n.model[l[d]]=a[d]);return n.$forceUpdate(),n.$u.toast("上传识别成功")}e.showToast({title:"登录已过期",success:function(t){setTimeout((function(){e.removeStorageSync("userInfo"),e.navigateTo({url:"/pages/user/login"})}),600)}})}})},getimgurl:function(e){return e?this.$u.test.jsonString(e)?JSON.parse(e).map((function(e){return{url:e}})):e:[]},addline:function(e){this.loading=!0;var t,n={},i=r(this.bgsx.Zdsz[e].bzb);try{for(i.s();!(t=i.n()).done;){var o=t.value;n[o]=""}}catch(a){i.e(a)}finally{i.f()}this.model[e]?this.model[e].push(n):this.model[e]=[n],this.loading=!1},delline:function(e,t){this.loading=!0,this.model[e].splice(t,1),this.loading=!1},dxselect:function(e,t){return e?e.split("/").map((function(e){return{value:t,label:e}})):[]},dxradio:function(e,t){return e?e.split("/").map((function(e){return{name:e,checked:!!t.includes(e),disabled:!1}})):[]},syscsh:function(t,n){var r=this;if(!t||!n)return this.$u.toast("数据不存在");e.request({url:getApp().globalData.url+"/tb/tbjg",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+e.getStorageSync("userInfo").token},data:{id:t,jgid:n},success:function(t){if(401!=t.statusCode||"2"!=getApp().globalData.data.islogin){if(200!==t.statusCode)return r.$u.toast("服务器无法连接");if(0!=t.data.code||!t.data.result)return r.$u.toast(t.data.message);if(r.bgsx=t.data.message,!r.bgsx.Zdsz)return r.$u.toast("字段设置错误");r.model=t.data.result[0],r.zdsz=t.data.message.Zdsz;var n={};for(var i in r.bgsx.Zdsz){var o=r.bgsx.Zdsz[i],a="请输入"+r.bgsx.Zd[i],u=2==o["bt"];if(21==o["i"]&&(r.model[i]=r.model[i]?JSON.parse(r.model[i]).toString():""),19==o["i"]&&(r.model[i]=r.model[i]?JSON.parse(r.model[i]):[]),2!=o["i"]&&4!=o["i"]||r.dxview(i,r.model[i]),3==o["i"]||5==o["i"]){var s=r.model[i]?JSON.parse(r.model[i]):[];r.bgsx.Zdsz[i].xx=r.dxradio(r.bgsx.Zdsz[i].xx,s)}6==o["i"]||7==o["i"]?u&&(n[i]=[{validator:function(e,t,n){return!r.$u.test.isEmpty(t)},message:"请上传"+r.zd[i],trigger:"change"}]):12==o["i"]?u&&(n[i]=[{required:u,message:a,trigger:["change","blur"]},{validator:function(e,t,n){return r.$u.test.mobile(t)},message:"手机号码不正确",trigger:["change","blur"]}]):13==o["i"]?u&&(n[i]=[{required:u,message:a,trigger:["change","blur"]},{validator:function(e,t,n){return r.$u.test.idCard(t)},message:"身份证号不正确",trigger:["change","blur"]}]):14==o["i"]?u&&(n[i]=[{required:u,message:a,trigger:["change","blur"]},{validator:function(e,t,n){return r.$u.test.carNo(t)},message:"车牌号不正确",trigger:["change","blur"]}]):15==o["i"]?u&&(n[i]=[{required:u,message:a,trigger:["change","blur"]},{validator:function(e,t,n){return r.$u.test.digits(t)},message:"请输入整数",trigger:["change","blur"]}]):16==o["i"]?u&&(n[i]=[{required:u,message:a,trigger:["change","blur"]},{validator:function(e,t,n){return r.$u.test.amount(t)},message:"请输入小数",trigger:["change","blur"]}]):18==o["i"]||(19==o["i"]?u&&(n[i]=[{required:u,message:a,type:"array",trigger:["change","blur"]}]):n[i]=[{required:u,message:a,trigger:["change","blur"]}])}r.rules=n,r.$refs.uForm.setRules(r.rules)}else e.showToast({title:"登录已过期",success:function(t){setTimeout((function(){e.removeStorageSync("userInfo"),e.navigateTo({url:"/pages/user/login"})}),600)}})}})},onPageScroll:function(e){this.scrollTop=e.scrollTop},submit:function(){var t=this,n=this.$refs;for(var r in n)if("uForm"!=r&&"table"!=r){var i=this.bgsx.Zdsz[r].i;if("6"==i||"7"==i){var o=[],a=[];if(o=this.$refs[r][0].lists.filter((function(e){return 100==e.progress})),o.length>0)for(var u in o)o[u].response?a.push(o[u].response.result):a.push(o[u].url);this.model[r]=JSON.stringify(a)}}this.$refs.uForm.validate((function(n){if(n){for(var r in t.model)"ID"!==r&&19==t.bgsx.Zdsz[r].i&&t.model[r]&&t.$u.test.array(t.model[r])&&(t.model[r]=JSON.stringify(t.model[r])),"ID"!==r&&21==t.bgsx.Zdsz[r].i&&t.model[r]&&(t.model[r]=t.$u.test.jsonString(t.model[r])?t.model[r]:JSON.stringify(t.model[r].replace(/，/g,",").split(",")));e.request({url:getApp().globalData.url+"/tb/edit",method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+e.getStorageSync("userInfo").token},data:{id:t.bgsx.ID,tid:t.jgid,data:JSON.stringify(t.model)},success:function(n){if(401!=n.statusCode||"2"!=getApp().globalData.data.islogin)return 200!==n.statusCode?t.$u.toast("服务器无法连接"):void(0==n.data.code?(e.showToast({title:"修改成功!",duration:1500}),setTimeout((function(){1==t.zt?e.navigateBack():e.navigateTo({url:"/pages/form/tbjg?id="+t.id+"&jgid="+t.jgid+"&cjz="+t.cjz+"&isedit=1"})}),500)):e.showToast({title:n.data.message,icon:""}));e.showToast({title:"登录已过期",success:function(t){setTimeout((function(){e.removeStorageSync("userInfo"),e.navigateTo({url:"/pages/user/login"})}),600)}})}})}}))},checkboxGroupChange:function(e,t){this.model[t]=JSON.stringify(e)},confirm:function(e){var t=e.shift(),n=t.value;this.model[n]=t.label,this.dxview(n,t.label)},radioGroupChange:function(e,t){this.dxview(t,e)},dxview:function(e,t){console.log(e,t);var n=this.bgsx.Zdsz[e].xx.split("/");if(n.length<1)return this.$u.toast("选项为空");var i,o=r(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(this.bgsx.Zdsz[e]["view"+a]){var u,s=r(this.bgsx.Zdsz[e]["yczd"+a]);try{for(s.s();!(u=s.n()).done;){var l=u.value;this.bgsx.Zdsz[l].yc=0}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){o.e(f)}finally{o.f()}if(this.bgsx.Zdsz[e]["view"+t]&&this.bgsx.Zdsz[e]["view"+t]==t){var d,c=r(this.bgsx.Zdsz[e]["yczd"+t]);try{for(c.s();!(d=c.n()).done;){var K=d.value;this.bgsx.Zdsz[K].yc=1}}catch(f){c.e(f)}finally{c.f()}}},confirmdate:function(e,t){this.model[t]=e.year+"-"+e.month+"-"+e.day},confirmdate2:function(e,t){this.model[t]=e.hour+":"+e.minute+":"+e.second},confirmdate3:function(e,t){this.model[t]=e.year+"-"+e.month+"-"+e.day+" "+e.hour+":"+e.minute+":"+e.second},confirmdate4:function(e,t){this.model[t]=e.province.label+"/"+e.city.label+"/"+e.area.label}}};t.default=u}).call(this,n("543d")["default"])},7316:function(e,t,n){},a178:function(e,t,n){"use strict";var r=n("7316"),i=n.n(r);i.a},aa83:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var r={uForm:function(){return n.e("uview-ui/components/u-form/u-form").then(n.bind(null,"d956"))},uFormItem:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-form-item/u-form-item")]).then(n.bind(null,"6448"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-input/u-input")]).then(n.bind(null,"37d1"))},uRadioGroup:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-radio-group/u-radio-group")]).then(n.bind(null,"3b8c"))},uRadio:function(){return n.e("uview-ui/components/u-radio/u-radio").then(n.bind(null,"f574"))},uCheckboxGroup:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-checkbox-group/u-checkbox-group")]).then(n.bind(null,"cad5"))},uCheckbox:function(){return n.e("uview-ui/components/u-checkbox/u-checkbox").then(n.bind(null,"30fd"))},uSelect:function(){return n.e("uview-ui/components/u-select/u-select").then(n.bind(null,"0477"))},htzImageUpload:function(){return Promise.all([n.e("common/vendor"),n.e("components/htz-image-upload/htz-image-upload")]).then(n.bind(null,"868e"))},uUpload:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-upload/u-upload")]).then(n.bind(null,"4f94"))},uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-picker/u-picker")]).then(n.bind(null,"4f8a"))},uniTable:function(){return n.e("uni_modules/uni-table/components/uni-table/uni-table").then(n.bind(null,"e66e"))},uniTr:function(){return n.e("uni_modules/uni-table/components/uni-tr/uni-tr").then(n.bind(null,"88c5"))},uniTh:function(){return n.e("uni_modules/uni-table/components/uni-th/uni-th").then(n.bind(null,"9bd1"))},uniTd:function(){return n.e("uni_modules/uni-table/components/uni-td/uni-td").then(n.bind(null,"6b1a"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"a25e"))},uBackTop:function(){return n.e("uview-ui/components/u-back-top/u-back-top").then(n.bind(null,"a999"))}},i=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.bgsx.Zdsz,(function(t,n){var r=e.__get_orig(t),i=2!=t.yc&&e.bgsx.Kfcx.includes(n),o=i&&1!=t.i&&2==t.i?t.xx.split("/"):null,a=i&&1!=t.i&&2!=t.i&&3!=t.i&&5!=t.i&&4==t.i&&2!=t.zd?e.dxselect(t.xx,n):null,u=i&&1!=t.i&&2!=t.i&&3!=t.i&&5!=t.i&&4!=t.i&&13==t.i&&(t.name||t.sex||t.mz||t.day||t.ade||t.zmtp)?{key:n}:null,s=!i||1==t.i||2==t.i||3==t.i||5==t.i||4==t.i||13==t.i||6!=t.i&&7!=t.i?null:{key:n,imgwh:t.imgwh},l=!i||1==t.i||2==t.i||3==t.i||5==t.i||4==t.i||13==t.i||6!=t.i&&7!=t.i?null:e.getimgurl(e.model[n]);return{$orig:r,g0:i,l0:o,m0:a,a0:u,a1:s,m1:l}})));e._isMounted||(e.e0=function(t,n){var r=arguments[arguments.length-1].currentTarget.dataset,i=r.eventParams||r["event-params"];n=i.k;e.selectShow[n]=!0},e.e1=function(t,n){var r=arguments[arguments.length-1].currentTarget.dataset,i=r.eventParams||r["event-params"];n=i.k;e.pickerShow[n]=!0},e.e2=function(t,n){var r=arguments[arguments.length-1].currentTarget.dataset,i=r.eventParams||r["event-params"];n=i.k;e.pickerShow[n]=!0},e.e3=function(t,n){var r=arguments[arguments.length-1].currentTarget.dataset,i=r.eventParams||r["event-params"];n=i.k;e.pickerShow[n]=!0},e.e4=function(t,n){var r=arguments[arguments.length-1].currentTarget.dataset,i=r.eventParams||r["event-params"];n=i.k;e.dqrShow[n]=!0}),e.$mp.data=Object.assign({},{$root:{l1:n}})},o=[]},fcc9:function(e,t,n){"use strict";(function(e){n("98dd");r(n("66fd"));var t=r(n("421b"));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])}},[["fcc9","common/runtime","common/vendor"]]]);